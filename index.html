<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ëŒ€ë°•ë¡œë˜ í™ˆí™”ë©´ ì¶”ê°€</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ffcc00">
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: #fffbe6;
      color: #222;
      text-align: center;
      padding: 40px 20px;
    }
    h1 {
      color: #ffbb00;
      font-size: 2em;
      margin-bottom: 10px;
    }
    p { font-size: 1.1em; color: #444; margin-bottom: 25px; }
    button {
      background: #ffcc00;
      color: #000;
      border: none;
      padding: 12px 25px;
      font-size: 1.1em;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 3px 6px rgba(0,0,0,0.15);
    }
    button:hover { background: #ffdb4d; }
    .info { margin-top: 30px; font-size: 0.95em; color: #555; line-height: 1.6; }
    .highlight { color: #d32f2f; font-weight: bold; }
  </style>
</head>
<body>

  <h1>ğŸ¯ ëŒ€ë°•ë¡œë˜</h1>
  <p>í™ˆí™”ë©´ì— <b>ëŒ€ë°•ë¡œë˜</b> ì•„ì´ì½˜ì„ ì¶”ê°€í•´<br>ë§¤ì£¼ ë¡œë˜ ë‹¹ì²¨ ì—¬ë¶€ë¥¼ ê°„í¸í•˜ê²Œ í™•ì¸í•˜ì„¸ìš”!</p>
  
  <button id="installBtn">í™ˆí™”ë©´ì— ì¶”ê°€</button>
  
  <div id="guideText" class="info"></div>

  <script>
    /*  
    -----------------------------------------------------
      ğŸ”¥ í™ˆ í™”ë©´ì—ì„œ ì‹¤í–‰ ì‹œ ìë™ ë¦¬ë””ë ‰ì…˜
    -----------------------------------------------------
    */
    const redirectURL = "https://subjop.tistory.com/entry/%EB%82%B4%EA%B0%80-%EC%A0%81%EC%9D%80-%EB%A1%9C%EB%98%90%EB%B2%88%ED%98%B8-%EA%B3%BC%EA%B1%B0%EC%97%90-%EB%8B%B9%EC%B2%A8%EB%90%9C%EC%A0%81%EC%9D%B4-%EC%9E%88%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8%EC%A1%B0%ED%9A%8C";

    const isStandalone =
      window.matchMedia('(display-mode: standalone)').matches ||
      window.navigator.standalone === true;

    if (isStandalone) {
      window.location.href = redirectURL;
    }

    /*  
    -----------------------------------------------------
      ğŸ”¥ OS / ë¸Œë¼ìš°ì € ìë™ ê°ì§€ í›„ ì•ˆë‚´ë¬¸ ì¶œë ¥
    -----------------------------------------------------
    */
    const ua = navigator.userAgent.toLowerCase();
    const guideBox = document.getElementById('guideText');

    let guideMessage = "";

    // ì•„ì´í° Safari
    const isIOS = /iphone|ipad|ipod/.test(ua);
    const isSafari = isIOS && !ua.includes("crios") && !ua.includes("fxios");

    // ì•„ì´í° Chrome
    const isIOSChrome = isIOS && ua.includes("crios");

    // ê°¤ëŸ­ì‹œ (Android Chrome)
    const isAndroid = /android/.test(ua);
    const isAndroidChrome = isAndroid && ua.includes("chrome");

    if (isSafari) {
      guideMessage = `
        ğŸ“± <b>ì•„ì´í° ì‚¬íŒŒë¦¬</b>ì—ì„œ í™ˆ í™”ë©´ ì¶”ê°€ ë°©ë²•<br><br>
        1) ì•„ë˜ ì¤‘ì•™ì˜ <span class="highlight">ê³µìœ  ë²„íŠ¼</span>ì„ ëˆ„ë¥´ê³ <br>
        2) ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ <span class="highlight">"í™ˆ í™”ë©´ì— ì¶”ê°€"</span>ë¥¼ ì„ íƒí•˜ì„¸ìš”.
      `;
    }
    else if (isIOSChrome) {
      guideMessage = `
        ğŸ“± <b>ì•„ì´í° í¬ë¡¬</b>ì—ì„œ í™ˆ í™”ë©´ ì¶”ê°€ ë°©ë²•<br><br>
        1) ì˜¤ë¥¸ìª½ ìƒë‹¨ì˜ <span class="highlight">ê³µìœ  ë²„íŠ¼(â‹®)</span>ì„ ëˆ„ë¥´ê³ <br>
        2) ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ <span class="highlight">"í™ˆ í™”ë©´ì— ì¶”ê°€"</span>ë¥¼ ì„ íƒí•˜ì„¸ìš”.
      `;
    }
    else if (isAndroidChrome) {
      guideMessage = `
        ğŸ¤– <b>ê°¤ëŸ­ì‹œ(Android Chrome)</b>ì—ì„œëŠ”<br>
        ì•„ë˜ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <span class="highlight">ë°”ë¡œ í™ˆ í™”ë©´ì— ì„¤ì¹˜</span>ë©ë‹ˆë‹¤!
      `;
    }
    else {
      guideMessage = `
        â„¹ï¸ í™ˆ í™”ë©´ ì¶”ê°€ëŠ” ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
      `;
    }

    guideBox.innerHTML = guideMessage;

    /*  
    -----------------------------------------------------
      ğŸ”¥ PWA ì„¤ì¹˜ (Android)
    -----------------------------------------------------
    */
    let deferredPrompt;
    const installBtn = document.getElementById('installBtn');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.style.display = 'inline-block';
    });

    installBtn.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        deferredPrompt = null;
      } else {
        alert("ğŸ“± ì•„ì´í°ì˜ ê²½ìš° ìœ„ ì•ˆë‚´ë¬¸ì„ ì°¸ê³ í•´ í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì„¸ìš”!");
      }
    });
  </script>

</body>
</html>
